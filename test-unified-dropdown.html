<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Unified Dropdown Controller Test</title>
  <style>
    body {
      font-family: system-ui, -apple-system, sans-serif;
      padding: 40px;
      background: #f5f5f5;
      max-width: 1200px;
      margin: 0 auto;
    }

    h1 {
      color: #333;
      margin-bottom: 10px;
    }

    .subtitle {
      color: #666;
      margin-bottom: 40px;
      font-size: 14px;
    }

    .test-section {
      background: white;
      border-radius: 8px;
      padding: 30px;
      margin-bottom: 30px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }

    .test-section h2 {
      margin-top: 0;
      color: #444;
      font-size: 18px;
      margin-bottom: 20px;
      padding-bottom: 10px;
      border-bottom: 2px solid #e0e0e0;
    }

    .test-group {
      margin-bottom: 25px;
    }

    .test-label {
      display: block;
      font-weight: 600;
      margin-bottom: 8px;
      color: #555;
      font-size: 14px;
    }

    .status {
      display: inline-block;
      padding: 4px 12px;
      border-radius: 12px;
      font-size: 12px;
      font-weight: 600;
      margin-left: 10px;
    }

    .status.success {
      background: #e8f5e9;
      color: #2e7d32;
    }

    .status.migrated {
      background: #e3f2fd;
      color: #1565c0;
    }

    .info-box {
      background: #f5f5f5;
      border-left: 4px solid #2196f3;
      padding: 15px;
      margin: 20px 0;
      font-size: 14px;
      line-height: 1.6;
    }

    .component-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }

    code {
      background: #f5f5f5;
      padding: 2px 6px;
      border-radius: 3px;
      font-family: 'Courier New', monospace;
      font-size: 13px;
    }
  </style>
</head>
<body>
  <h1>üéØ Unified Dropdown Controller Test</h1>
  <p class="subtitle">Testing migrated components with UnifiedDropdownController</p>

  <div class="test-section">
    <h2>
      üìã Migration Status
      <span class="status success">6 Components Migrated</span>
    </h2>
    <div class="info-box">
      <strong>UnifiedDropdownController Features:</strong><br>
      ‚úÖ Fixed & Absolute Positioning<br>
      ‚úÖ Auto-placement (vertical & horizontal)<br>
      ‚úÖ All trigger modes (click, hover, focus, manual)<br>
      ‚úÖ Shadow DOM-aware click-outside detection<br>
      ‚úÖ Escape key handling<br>
      ‚úÖ Scroll behaviors (reposition/close/none)<br>
      ‚úÖ Dynamic configuration updates
    </div>
  </div>

  <div class="test-section">
    <h2>
      ‚è∞ Timepicker Component
      <span class="status migrated">Migrated</span>
    </h2>

    <div class="test-group">
      <label class="test-label">Basic Time Picker</label>
      <nr-timepicker
        label="Select Time"
        value="14:30"
        format="12h">
      </nr-timepicker>
    </div>

    <div class="test-group">
      <label class="test-label">With Seconds</label>
      <nr-timepicker
        label="Time with Seconds"
        value="09:15:30"
        show-seconds>
      </nr-timepicker>
    </div>

    <div class="info-box">
      <strong>Configuration:</strong><br>
      <code>positioning: 'absolute'</code><br>
      <code>scrollBehavior: 'close'</code><br>
      <code>minWidth: 'trigger'</code>
    </div>
  </div>

  <div class="test-section">
    <h2>
      üé® Colorpicker Component
      <span class="status migrated">Migrated</span>
    </h2>

    <div class="test-group">
      <label class="test-label">Basic Color Picker</label>
      <nr-color-picker
        label="Choose Color"
        color="#3498db">
      </nr-color-picker>
    </div>

    <div class="test-group">
      <label class="test-label">With Preset Colors</label>
      <nr-color-picker
        label="Theme Color"
        color="#e74c3c"
        .defaultColorSets="${['#3498db', '#e74c3c', '#2ecc71', '#f39c12', '#9b59b6']}">
      </nr-color-picker>
    </div>

    <div class="info-box">
      <strong>Configuration:</strong><br>
      <code>positioning: 'fixed'</code><br>
      <code>scrollBehavior: 'reposition'</code><br>
      <code>zIndex: 9999</code>
    </div>
  </div>

  <div class="test-section">
    <h2>üìä Component Comparison</h2>
    <div class="component-grid">
      <div>
        <h3 style="margin-top: 0; font-size: 16px;">Timepicker</h3>
        <ul style="font-size: 14px; line-height: 1.8;">
          <li>Absolute positioning</li>
          <li>Close on scroll</li>
          <li>Match trigger width</li>
          <li>Manual trigger</li>
        </ul>
      </div>
      <div>
        <h3 style="margin-top: 0; font-size: 16px;">Colorpicker</h3>
        <ul style="font-size: 14px; line-height: 1.8;">
          <li>Fixed positioning</li>
          <li>Reposition on scroll</li>
          <li>High z-index</li>
          <li>Manual trigger</li>
        </ul>
      </div>
    </div>
  </div>

  <div class="test-section">
    <h2>‚úÖ Test Checklist</h2>
    <div style="font-size: 14px; line-height: 2;">
      <label><input type="checkbox"> Click trigger opens dropdown</label><br>
      <label><input type="checkbox"> Escape key closes dropdown</label><br>
      <label><input type="checkbox"> Click outside closes dropdown</label><br>
      <label><input type="checkbox"> Dropdown repositions on scroll (colorpicker)</label><br>
      <label><input type="checkbox"> Dropdown closes on scroll (timepicker)</label><br>
      <label><input type="checkbox"> Auto-placement works (top/bottom)</label><br>
      <label><input type="checkbox"> Viewport constraining works</label><br>
      <label><input type="checkbox"> Component events fire correctly</label>
    </div>
  </div>

  <script type="module">
    // Import components
    import './dist/components/timepicker/timepicker.component.js';
    import './dist/components/colorpicker/color-picker.component.js';
    import './dist/components/input/input.component.js';
    import './dist/components/icon/icon.component.js';
    import './dist/components/button/button.component.js';

    // Test event listeners
    document.addEventListener('DOMContentLoaded', () => {
      console.log('‚úÖ UnifiedDropdownController Test Page Loaded');

      // Listen for dropdown events
      document.addEventListener('dropdown-open', (e) => {
        console.log('üìÇ Dropdown opened:', e.detail);
      });

      document.addEventListener('dropdown-close', (e) => {
        console.log('üìÅ Dropdown closed:', e.detail);
      });

      document.addEventListener('dropdown-reposition', (e) => {
        console.log('üìç Dropdown repositioned:', e.detail);
      });

      // Listen for component-specific events
      document.addEventListener('nr-time-change', (e) => {
        console.log('‚è∞ Time changed:', e.detail);
      });

      document.addEventListener('nr-color-change', (e) => {
        console.log('üé® Color changed:', e.detail);
      });
    });
  </script>
</body>
</html>
